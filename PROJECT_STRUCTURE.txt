ğŸ“Š BRP PORTFOLIO OPTIMIZER - Estrutura do Projeto
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

brp_optimize_portfolio/
â”‚
â”œâ”€â”€ ğŸ“„ DOCUMENTAÃ‡ÃƒO
â”‚   â”œâ”€â”€ README.md                    â† Guia TÃ©cnico Completo
â”‚   â”œâ”€â”€ SETUP.md                     â† InstalaÃ§Ã£o e Troubleshooting
â”‚   â”œâ”€â”€ RESUMO_PROJETO.md            â† Este resumo (leia primeiro!)
â”‚   â””â”€â”€ PROJECT_STRUCTURE.txt        â† Estrutura (este arquivo)
â”‚
â”œâ”€â”€ ğŸš€ EXECUÃ‡ÃƒO
â”‚   â”œâ”€â”€ app.py                       â† AplicaÃ§Ã£o Streamlit (EXECUTE ISTO)
â”‚   â”œâ”€â”€ example_usage.py             â† Script de uso programÃ¡tico
â”‚   â”œâ”€â”€ run.bat                      â† ExecuÃ§Ã£o rÃ¡pida (Windows)
â”‚   â”œâ”€â”€ run.sh                       â† ExecuÃ§Ã£o rÃ¡pida (Mac/Linux)
â”‚   â””â”€â”€ requirements.txt             â† DependÃªncias Python
â”‚
â”œâ”€â”€ ğŸ“¦ PACOTE PRINCIPAL
â”‚   â””â”€â”€ brp_portfolio_optimizer/
â”‚       â”‚
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ”§ src/  (MÃ³dulos Principais)
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ data_processor.py    â† Carrega e valida CSV
â”‚       â”‚   â”œâ”€â”€ optimizer.py         â† OtimizaÃ§Ã£o Markowitz
â”‚       â”‚   â”œâ”€â”€ metrics.py           â† 20+ mÃ©tricas
â”‚       â”‚   â””â”€â”€ reports.py           â† Gera relatÃ³rios
â”‚       â”‚
â”‚       â”œâ”€â”€ âš™ï¸  config/  (ConfiguraÃ§Ãµes)
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ settings.py          â† Constantes e configs
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“¥ data/  (Dados de Entrada)
â”‚       â”‚   â””â”€â”€ [Coloque seus CSV aqui]
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“¤ outputs/  (RelatÃ³rios Gerados)
â”‚       â”‚   â”œâ”€â”€ Portfolio_Report.html
â”‚       â”‚   â””â”€â”€ Portfolio_Report.xlsx
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ logs/  (Logs)
â”‚           â””â”€â”€ optimizer.log
â”‚
â”œâ”€â”€ ğŸ§ª tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_optimizer.py            â† Suite de 9 testes
â”‚
â”œâ”€â”€ ğŸ” .gitignore
â”‚
â””â”€â”€ ğŸ“‹ INSTRUÃ‡Ã•ES RÃPIDAS

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ QUICK START (30 segundos)

1. Abra o terminal nesta pasta
2. Execute (Windows):
   .\run.bat
   
   Ou (Mac/Linux):
   bash run.sh

3. Navegador abrirÃ¡ em http://localhost:8501

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š MÃ“DULOS PRINCIPAIS

â”Œâ”€ DataProcessor (data_processor.py)
â”‚  â”œâ”€ Carrega CSV
â”‚  â”œâ”€ Valida colunas obrigatÃ³rias
â”‚  â”œâ”€ Converte datas
â”‚  â”œâ”€ Faz pivot diÃ¡rio
â”‚  â””â”€ Retorna matrix de PnL
â”‚
â”œâ”€ PortfolioOptimizer (optimizer.py)
â”‚  â”œâ”€ Calcula retornos anualizados
â”‚  â”œâ”€ Otimiza Sharpe Ratio (Markowitz)
â”‚  â”œâ”€ Calcula multiplicadores de risco
â”‚  â””â”€ Dimensiona lotes para MT5
â”‚
â”œâ”€ MetricsCalculator (metrics.py)
â”‚  â”œâ”€ Calcula 20+ mÃ©tricas
â”‚  â”œâ”€ Sharpe, Sortino, Calmar
â”‚  â”œâ”€ Drawdown, Volatilidade
â”‚  â””â”€ Win Rate, Profit Factor, etc
â”‚
â””â”€ ReportGenerator (reports.py)
   â”œâ”€ Gera grÃ¡ficos matplotlib
   â”œâ”€ Cria relatÃ³rios HTML
   â”œâ”€ Exporta para Excel
   â””â”€ Tabelas formatadas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¨ INTERFACE STREAMLIT (app.py)

â”Œâ”€ Aba 1: Upload & AnÃ¡lise
â”‚  â””â”€ Upload CSV â†’ ValidaÃ§Ã£o â†’ OtimizaÃ§Ã£o
â”‚
â”œâ”€ Aba 2: Resultados
â”‚  â”œâ”€ GrÃ¡fico Equity Curve
â”‚  â”œâ”€ Tabela de MÃ©tricas
â”‚  â””â”€ AlocaÃ§Ã£o MT5
â”‚
â””â”€ Aba 3: RelatÃ³rio
   â”œâ”€ Gerar HTML
   â”œâ”€ Gerar Excel
   â””â”€ Download

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ˆ PIPELINE DE PROCESSAMENTO

    ğŸ“¥ CSV Upload
        â†“
    âœ“ ValidaÃ§Ã£o de Colunas
        â†“
    â†º Tratamento de Datas
        â†“
    â—Š Pivot DiÃ¡rio (Date Ã— Strategy)
        â†“
    â—† OtimizaÃ§Ã£o Markowitz
        â†“
    â‰ˆ Position Sizing (Risk Adjusted)
        â†“
    ğŸ“Š CÃ¡lculo de MÃ©tricas (20+)
        â†“
    ğŸ“‹ GeraÃ§Ã£o de RelatÃ³rios
        â†“
    âœ… Download (HTML / Excel)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š MÃ‰TRICAS GERADAS

Risco (6):
  â€¢ Max Drawdown $ e %
  â€¢ Daily Volatility %
  â€¢ Annual Volatility %
  â€¢ Pior Dia $ e %

Retorno (3):
  â€¢ Total Profit $
  â€¢ Total Return %
  â€¢ CAGR %

EficiÃªncia (8):
  â€¢ Sharpe Ratio
  â€¢ Sortino Ratio
  â€¢ Calmar Ratio
  â€¢ Profit Factor
  â€¢ Win Rate %
  â€¢ Avg Profit Trade
  â€¢ Avg Loss Trade
  â€¢ Profit/Loss Ratio

Trades (5):
  â€¢ Total Trades
  â€¢ Winning Trades
  â€¢ Losing Trades
  â€¢ Best Day $ e %

Temporais (5):
  â€¢ MÃ©dia Lucro Mensal
  â€¢ MÃ©dia Lucro Semanal
  â€¢ MÃ©dia Lucro Anual
  â€¢ Dias Operando
  â€¢ Meses Operando

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ CONFIGURAÃ‡Ã•ES PERSONALIZÃVEIS

No Streamlit (app.py):
  â–¡ Capital Inicial (padrÃ£o: $100.000)
  â–¡ TolerÃ¢ncia de DD (padrÃ£o: 25%)
  â–¡ Benchmark (padrÃ£o: SPY)

No settings.py:
  â–¡ DEFAULT_CAPITAL_INICIAL
  â–¡ DEFAULT_RISK_TOLERANCE_DD
  â–¡ REQUIRED_COLUMNS
  â–¡ Etc...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST - O QUE FOI ENTREGUE

Arquitetura:
  âœ… Estrutura modular profissional
  âœ… 5 mÃ³dulos Python principais
  âœ… SeparaÃ§Ã£o de responsabilidades

Funcionalidade:
  âœ… Carregamento e validaÃ§Ã£o de CSV
  âœ… OtimizaÃ§Ã£o Markowitz
  âœ… Position Sizing inteligente
  âœ… 20+ mÃ©tricas de performance
  âœ… RelatÃ³rios HTML e Excel
  âœ… ConfiguraÃ§Ã£o MT5

Interface:
  âœ… App web Streamlit
  âœ… Design profissional
  âœ… Upload drag & drop
  âœ… VisualizaÃ§Ãµes interativas

DocumentaÃ§Ã£o:
  âœ… README completo
  âœ… SETUP com troubleshooting
  âœ… Docstrings em todas as funÃ§Ãµes
  âœ… Exemplos de uso

Testes:
  âœ… 9 testes unitÃ¡rios
  âœ… Cobertura de mÃ³dulos
  âœ… Suite de integraÃ§Ã£o

ProduÃ§Ã£o:
  âœ… Scripts de execuÃ§Ã£o
  âœ… Logging detalhado
  âœ… Tratamento de erros
  âœ… .gitignore configurado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ DEPENDÃŠNCIAS

pandas          >= 1.5.0    (Dados)
numpy           >= 1.23.0   (CÃ¡lculos)
scipy           >= 1.9.0    (OtimizaÃ§Ã£o)
matplotlib      >= 3.5.0    (GrÃ¡ficos)
streamlit       >= 1.20.0   (Web)
openpyxl        >= 3.9.0    (Excel)
quantstats      >= 0.2.0    (MÃ©tricas avanÃ§adas)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ COMO ENTENDER O CÃ“DIGO

Iniciante:
  1. Leia: README.md
  2. Execute: run.bat (Windows) ou run.sh (Mac/Linux)
  3. Use a interface web

IntermediÃ¡rio:
  1. Leia: example_usage.py
  2. Execute: python example_usage.py
  3. Explore os mÃ³dulos em brp_portfolio_optimizer/src/

AvanÃ§ado:
  1. Leia o cÃ³digo fonte comentado
  2. Execute os testes: pytest tests/ -v
  3. Implemente suas customizaÃ§Ãµes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ PRÃ“XIMOS PASSOS RECOMENDADOS

1. Fazer Upload de Dados:
   Prepare um CSV com suas trades seguindo o formato:
   Open time, Strategy name (Global), Profit/Loss (Global), Size

2. Executar a OtimizaÃ§Ã£o:
   Use a interface web para analisar e otimizar

3. Gerar RelatÃ³rios:
   Exporte em HTML (visualizar) ou Excel (dados)

4. Implementar em MT5:
   Use os lotes otimizados no seu Expert Advisor

5. Monitorar:
   Acompanhe a performance comparada ao backtest

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ SUPORTE & DOCUMENTAÃ‡ÃƒO

DÃºvidas sobre instalaÃ§Ã£o?
  â†’ Veja SETUP.md

DÃºvidas sobre funcionalidade?
  â†’ Veja README.md

DÃºvidas sobre cÃ³digo?
  â†’ Consulte docstrings (comentÃ¡rios em """...""")

Erros ao executar?
  â†’ Verifique logs/optimizer.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VersÃ£o: 1.0.0
Status: âœ… PRONTO PARA PRODUÃ‡ÃƒO
Desenvolvido por: BRP Quant Capital
Data: Janeiro 2026

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
